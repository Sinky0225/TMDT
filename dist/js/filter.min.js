"use strict";const rangeSliderPrice=()=>{if(document.querySelector("#rangeProduct")){let a=+$("#rangeProduct").attr("data-min"),b=+$("#rangeProduct").attr("data-max");const c=window.location.pathname,d=window.location.origin,e=d+c,f=document.querySelector(".proFilter__item.range label").getAttribute("data-current"),g=()=>{let a=$(".proFilter__item.style select").val();return a},h=()=>{let a=$(".proFilter__item.price select").val();return a},i=(a,b)=>{let c=`fromPrice=${a}`,d=`toPrice=${b}`,f=`catalog=${g()}`,i=`type=${h()}`;return 0<g().length?`${e}?${c}&${d}&${f}&${i}`:(f=null,`${e}?${c}&${d}&${i}`)},j=a=>{$.ajax({type:"GET",url:a,beforeSend:function(){$(".product__list").css({opacity:".2","pointer-events":"none"})},success:function(a){$(".product__list").html(a),showSale(),ajaxGetMoreProduct()},complete:function(){$(".product__list").css({opacity:"1","pointer-events":"initial"}),window.history.pushState({},"",a)}})};if(a!==b){let c=+$("#rangeProduct").attr("data-current-min"),d=+$("#rangeProduct").attr("data-current-max");$(".priceLow__range").text(`${c}`),$(".priceHigh__range").text(`${d}`),$("#rangeProduct").slider({range:!0,min:a,max:b,values:[c,d],slide:function(a,b){$("#amount").val(b.values[0]+" - "+b.values[1]),$(".priceLow__range").text(`${(+b.values[0]).toLocaleString("de-DE")} ${f}`),$(".priceHigh__range").text(`${(+b.values[1]).toLocaleString("de-DE")} ${f}`)},stop:function(){},create:function(){}}),$(".proFilter__item.submit").on("click",function(){const a=i(+$("#rangeProduct").slider("values",0),+$("#rangeProduct").slider("values",1));j(a)}),$("#amount").val($("#rangeProduct").slider("values",0)+" - "+$("#rangeProduct").slider("values",1)),$(".priceLow__range").text(`${(+$("#rangeProduct").slider("values",0)).toLocaleString("de-DE")} ${f}`),$(".priceHigh__range").text(`${(+$("#rangeProduct").slider("values",1)).toLocaleString("de-DE")} ${f}`)}else $(".proFilter__item.range").remove()}},ajaxGetMoreProduct=()=>{const a=document.querySelector(".productGetAll .get");a&&$(document).on("click",".productGetAll .get",function(){const b=$(this).parent().attr("data-url");$.ajax({type:"get",url:b,success:b=>{$(a.parentElement.parentElement).append(b),showSale()},complete:()=>{a.parentElement.remove()},error:a=>{console.log(a)}})})},showSale=()=>{const a=document.querySelectorAll(".proItem__price");a.forEach(a=>{const b=document.querySelector("[data-current]").getAttribute("data-current"),c=$(a).children("h4").eq(0).text(),d=c.replace(`${b}`,"");""==d.trim().split(".").join("")?($(a).addClass("notSale"),$(a).children("h4").eq(0).text("hide"),$(a).children("h4").eq(0).addClass("hide")):$(a).addClass("haveSale")})};document.addEventListener("DOMContentLoaded",()=>{showSale(),rangeSliderPrice(),ajaxGetMoreProduct()});